

language: node_js
node_js:
- '8'

cache:
  directories:
     - ./node_modules

before_install:
  - npm install -g --silent @angular/cli

install:
  - npm install

script:
  # Use Chromium instead of Chrome.
  - export CHROME_BIN=chromium-browser
  - xvfb-run -a npm run test -- --single-run --no-progress --browser=ChromeNoSandbox
  - xvfb-run -a npm run e2e -- --no-progress --config=protractor-ci.conf.js

deploy:
  provider: heroku
  api_key:
    secure: aOTAaKqAUnTVFmAzBJvieODYnYbe2KF3dmvGudFPac0XOeBAtxKakuSyBzu0DG1+xzCLncIHvzWsl6fyicI7jbpGofnQcchd7YvwqmZ5bzPKwqJi/+ynJCWX8raR0uk14mpUagsk3m7d99+e8lyeTm8qcwpAiEbBFc6Fx0uI+OHnhbVeJ+kq27+UPzJ2iyYe8GTcq3I0XR01molyn411OpDw29KLcgF+AwP34/yWheN3PCIXyDtssTLuMWDF7/aDdhDNraKVqToUMmMZ0hC5aXviHmYNXU9CyjCpIaLdeaHtMecG+7Xvr63aLH0SnFfG4WH40Tu3gjXsXAskPZM8B7i0ZOmYwZDbSXgemnmIg/ZgrjjwjiadC2JEEZ71zWVj92P0gszGOz9c+f7/IYky24RLQsgz0rv9CQLYtmj5Tg/OjxXojO7Yf+bz3i3DL7ZDqb++qgvEGkgMyBYIO9q2nGqCNaB7dQKNJmqauB2544k+reiu077WarLT2fnMToKfZVaZOhx+YKa6pm5VsQpys02zUUWNRwz/ORsGDpmDkK2CU/U0CQZb1a+6PYScuIgnLKsolrSbimwfNZIRTk4zUDY2loP3Af2juLcocd/BEgOalG1MbG3/zpsHSO3r8zniq2sDQZjhLPLv+mNsBZL02zkInArb6UkeFimaoY5N/Vg=
  app: New-Portfolio
  on:
    repo: piemasters/New-Portfolio
